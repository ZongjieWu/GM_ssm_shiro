<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="candidates, career, employment, freelance, glassdoor, Human Resource Management, indeed, job board, job listing, job portal, job postings, jobs, listings, recruitment, resume">
	<meta name="CreativeLayers" content="ATFN">
	<!-- css file -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css">
	<!-- Responsive stylesheet -->
	<link rel="stylesheet" href="css/responsive.css">
	<!-- Title -->
	<title>职位详情 - 华顿教师人才</title>
	<!-- Favicon -->
	<link href="/static/common/image/hdrc.jpg" sizes="128x128" rel="shortcut icon" type="image/x-icon" />
	<link href="/static/common/image/hdrc.jpg" sizes="128x128" rel="shortcut icon" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	<style>
		.mt10 {
			margin-top: -336px;
		}
		.header_user_notif li:first-child span:last-child {
			background-color:transparent;
		}
		.footer_social_widget ul {
			text-align: left;
		}
	</style>
</head>
<body>
<div class="wrapper" id="app">
	<div class="preloader"></div>

	<!-- Main Header Nav -->
	<script src="login_head.js"></script>

	<!-- Candidate Personal Info Details-->
	<section class="bgc-fa pb30 mt70 mbt45">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-xl-8">
					<div class="candidate_personal_info style2">
						<div class="details">
							<h3 id="jobName">java工程师</h3>
							<span class="text-thm2 fwb" id="status">全职</span>
							<p><span>年龄：</span><span id="age"></span><span style="margin-left: 3%;">工龄：</span><span id="workAge"></span><span style="margin-left: 3%">学历：</span><span id="edu"></span>
							<ul class="address_list">
								<li class="list-inline-item"><a href="#"><span id="workPlace" class="flaticon-location-pin">江西省赣州市崇义县茶子邱组</span> </a></li>
								<li class="list-inline-item"><a href="#"><span id="jobMoney" class="flaticon-price">单双休</span> </a></li>
							</ul>
						</div>
						<div class="row job_meta_list mt30">
							<div class="col-sm-4 col-lg-4" onclick="sendResume();"><button class="btn btn-block btn-thm">投递简历 <span class="flaticon-right-arrow pl10"></span></button></div>
							<!--<div class="col-sm-4 col-lg-4"><button class="btn btn-block btn-gray"><span class="flaticon-favorites fz24 pr10"></span> 职位列表</button></div>-->
							<!--<div class="col-sm-4 col-lg-4"><button class="btn prpl40 btn-white"><span class="flaticon-share fz24 pr10"></span> 分享工作</button></div>-->
						</div>
					</div>
				</div>
				<div class="col-lg-4 col-xl-4">
					<div class="candidate_personal_overview style3">
						<div class="thumb">
							<img id="logo" class="img-fluid rounded" style="width:150px;height: 150px;" src="images/partners/cs1.jpg" alt="cs1.jpg">
						</div>
						<ul class="company_job_list mt30 mb30" id="enterpriseId" name=""  onclick="jumpAboutEnterprise(this);">
							<li class="list-inline-item"><a class="mt25" href="javascript:;">查看所有工作 <span class="flaticon-right-arrow pl10"></span></a></li>
							<li class="list-inline-item"><a class="mt25" href="javascript:;">公司简介 <span class="flaticon-right-arrow pl10"></span></a></li>
						</ul>

					</div>
					<!--<div class="map_sidebar_widget">-->
						<!--<h4 class="fz20 mb30">Job Location</h4>-->
						<!--<div class="h300" id="map-canvas"></div>-->
					<!--</div>-->
				</div>
			</div>
			<div class="row">
				<div class="col-xl-8">
					<div class="row">
						<div class="col-lg-12">
							<div class="candidate_about_info style2 mt20">
								<h4 class="fz20 mb30">工作描述</h4>
								<p class="mb30" id="jobDetail">Due to ongoing growth, this fun & energetic International corporate based on the outskirts of Oxford, is seeking a UX/UI Designer to join an innovative team, focused on delivering exciting User Experiences and great functionality, across both Web & Mobile platforms.</p>
								<p class="fwb" >背景, 技巧 & 经验</p>
								<p id="skill">-- Circa 3+ years experience designing for web and mobile platforms</p>
								<!--<button class="btn btn-lg btn-thm mb15">投递简历 <span class="flaticon-right-arrow pl10"></span></button>-->
							</div>

							</div>
						</div>
						<div class="col-lg-12" style="">
							<div class="my_resume_eduarea">
								<h4 class="title mb20">其他人还看了</h4>
							</div>
						</div>
						<template v-for="issueJob in jobList" :key="issueJob.id">
							<div class="col-lg-12" :id="issueJob.id" onclick="jumpDetail(this)">
								<div class="fj_post style2 one">
									<div class="details">
										<h4 style="display: inline;">{{issueJob.jobName}}</h4>
										<div class="thumb fn-smd" style="width:20%;height:20%;">
											<template v-if="issueJob.enterpriseLogo==null||issueJob.enterpriseLogo==''">
												<img class="img-fluid" src="images/partners/1.jpg" alt="1.jpg">
											</template>
											<template v-else="issueJob.enterpriseLogo==null">
												<img class="img-fluid" :src="'/'+issueJob.enterpriseLogo" alt="1.jpg">
											</template>
										</div>
										<p><span class="text-thm2" href="#">{{issueJob.enterpriseName}}</span><span class="text-thm2" style="margin-left:3%;">
											<template v-if="issueJob.status==0">
									在招
								</template>
								<template v-else-if="issueJob.status==1">
									急招
								</template>
								<template v-else-if="issueJob.status==2">
									停招
								</template>
										</span></p>
										<p><span>年龄</span><span style="margin-left: 1%;">{{issueJob.age}}</span><span style="margin-left: 3%;">工龄</span><span style="margin-left: 1%;">{{issueJob.workAge}}</span><span style="margin-left: 3%;">学历</span><span style="margin-left: 1%;">
											<template v-if="issueJob.edu==0">
													高中
												</template>
												<template v-else-if="issueJob.edu==1">
													大专
												</template>
												<template v-else-if="issueJob.edu==2">
													本科
												</template>
												<template v-else-if="issueJob.edu==3">
													研究生
												</template>
												<template v-else-if="issueJob.edu==4">
													博士
												</template>
										</span></p>

										<ul class="featurej_post">
											<li class="list-inline-item"><span class="flaticon-location-pin"></span> <a href="#">{{issueJob.workPlace}}</a></li>
											<li class="list-inline-item"><span class="flaticon-price pl20"></span> <a href="#">{{issueJob.jobMoney}}</a></li>
										</ul>
									</div>
									<a class="favorit" href="#"><span class="flaticon-favorites"></span></a>
								</div>
							</div>
						</template>

					</div>
				</div>

			</div>
	</section>

	<script src="footer.js"></script>
	<script src="jumpPage.js"></script>
	<a class="scrollToHome text-thm" href="#"><i class="flaticon-rocket-launch"></i></a>
</div>
<div ></div>
<!-- Wrapper End -->
<script type="text/javascript" src="js/jquery-3.3.1.js"></script>
<script type="text/javascript" src="js/jquery-migrate-3.0.0.min.js"></script>
<script type="text/javascript" src="js/popper.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.mmenu.all.js"></script>
<script type="text/javascript" src="js/ace-responsive-menu.js"></script>
<script type="text/javascript" src="js/bootstrap-select.min.js"></script>
<script type="text/javascript" src="js/snackbar.min.js"></script>
<script type="text/javascript" src="js/simplebar.js"></script>
<script type="text/javascript" src="js/parallax.js"></script>
<script type="text/javascript" src="js/scrollto.js"></script>
<script type="text/javascript" src="js/jquery-scrolltofixed-min.js"></script>
<script type="text/javascript" src="js/jquery.counterup.js"></script>
<script type="text/javascript" src="js/wow.min.js"></script>
<script type="text/javascript" src="js/progressbar.js"></script>
<script type="text/javascript" src="js/slider.js"></script>
<script type="text/javascript" src="js/timepicker.js"></script>
<script src="http://ditu.google.cn/maps/api/js?key=AIzaSyAAz77U5XQuEME6TpftaMdX0bBelQxXRlM&callback=initMap" type="text/javascript"></script>
<script type="text/javascript" src="js/googlemaps1.js"></script>
<!-- Custom script for all pages -->
<script type="text/javascript" src="js/script.js"></script>

<script type="text/javascript" src="/static/common/js/vue.js"></script>
<script src="/static/layuiadmin/layui/layui.js"></script>

<script>
	var enterpriseId=0;
    var app = new Vue({
        el: '#app',
        data: {
            jobDtailList: [],
            userName: '',
            enterpriseId: '',
            jobList: [],
            jobListCount: 0,
            headImg: 0
        },
        created: function () {
            if(localStorage.getItem("user")==null){
			}else{
                this.userName=JSON.parse(localStorage.getItem("user")).name;
                this.headImg=JSON.parse(localStorage.getItem("user")).headImg;
			}
            this.detail();
        },
        methods: {
            detail: function () {
                var data = {};
                data.id = this.aquireParam("id");
                $.ajaxSettings.async=false;
                $.post('/api/issueJob/detail', data, function (res) {
                    console.log(res.data);
                    var jobDetail=res.data[0];
                    $("#jobName").text(jobDetail.jobName);
                    $("#age").text(jobDetail.age);
                    $("#workAge").text(jobDetail.workAge);
                    $("#edu").text(edu(jobDetail.edu));
                    $("#status").text(status(jobDetail.status));
                    $("#workPlace").text(jobDetail.workPlace);
                    $("#jobMoney").text(jobDetail.jobMoney);
                    $("#jobDetail").text(jobDetail.jobDetail);
                    $("#skill").text(jobDetail.skill);
                    $("#logo").attr("src","/"+jobDetail.logo);
                    $("#enterpriseId").attr("id",jobDetail.enterpriseId);
                });
                $.ajaxSettings.async=true;
            },
            aquireParam: function (name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                var r = window.location.search.substr(1).match(reg);
                if (r != null) return unescape(r[2]);
                return null;
            },findJobList: function () {
                var data={};
                data.enterpriseId = app.enterpriseId;
                data.page=1;
                data.limit=10;
                var keywords=$("#txtKeyWord").val();
                data.keywords=keywords;
                var that=this;
                $.post('/api/issueJob/paging',data,function(res){
                    if(res.code==-1) {
                        alert(res.msg);
                        if (res.data != null && res.data == -1) {
                            window.location.href = "login.html";
                        }
                    }
                    that.jobListCount=res.count;
                });
            }
        }
    });

    search();
    function search() {
        app.findJobList();
        setTimeout(function(){
            console.log("search=="+app.jobListCount);
            layui.use('laypage', function () {
                laypage = layui.laypage;
                //执行一个laypage实例
                pageFindJob = laypage.render({
                    elem: 'test1' //注意，这里的 test1 是 ID，不用加 # 号
                    , limit: 10
                    , groups: 1
                    , count: app.jobListCount
                    , layout: ['prev','page', 'next']
                    , jump: function (obj, first) {
                        //obj包含了当前分页的所有参数，比如：
                        console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                        console.log(obj.limit); //得到每页显示的条数

                        //首次不执行
                        if (!first) {
                            //do something
                        }

                        var data = {};
                        data.enterpriseId = app.enterpriseId;
                        data.page = obj.curr;
                        data.limit = obj.limit;
                        var keywords=$("#txtKeyWord").val();
                        data.keywords=keywords;
                        $.post('/api/issueJob/paging', data, function (res) {
                            obj.count = res.count;
                            app.jobList = res.data;
                        });
                    }
                });
            });
        },300);
    }

    function sendResume(){
        if(JSON.parse((localStorage.getItem("user"))==undefined||JSON.parse(localStorage.getItem("user")==null))){
            alert("请登入");
            window.location.href="login.html";
        }else if(JSON.parse((localStorage.getItem("user"))).userResumeId==undefined||JSON.parse((localStorage.getItem("user"))).userResumeId==null) {
            alert("请完善简历");
            window.location.href="user.html";
        }else{
            var data={};
            data.uid=JSON.parse((localStorage.getItem("user"))).id;
            data.userResumeId=JSON.parse((localStorage.getItem("user"))).userResumeId;
            data.issueJobId=app.aquireParam("id");
            $.post("/api/sendResume/add",data,function(res){
                if(res.code==0){
                    alert("投递成功");
                }else{
                    alert(res.msg);S
                }
            });

        }
    }
    function status(status){
        if(status==0){
            return "在招";
		}else if(status=1){
            return "急招";
		}else if(status=2){
			return "停招";
        }
	}

	function edu(edu) {
		if(edu==0){
		    return "高中";
		}else if(edu==1){
		    return "大专";
		}else if(edu==2){
			return "本科";
        }else if(edu==3){
			return "研究生";
        }else if(edu==4){
			return "博士";
        }
    }

    function jumpAboutEnterprise(data) {
        window.location.href="aboutEnterprise.html?id="+data.id;
    }

    function jumpDetail(data) {
        window.location.href="jobDetail.html?id="+data.id;
    }
</script>
</body>
</html>